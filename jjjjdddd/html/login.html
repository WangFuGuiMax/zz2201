<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="../js/jquery-1.11.3.js"></script>
  <link rel="stylesheet" href="../css/login.css">
</head>

<body>
  <div class="box">
    <img src="https://misc.360buyimg.com/lib/img/e/logo-201305-b.png" alt="">
    <h1>欢迎登录</h1>
  </div>
  <div class="box1">
    <div class="box11">
      <div>
        <a href="zhuce.html">去注册</a>
        <input type="text" id="username" placeholder="邮箱/账户/手机号">
        <span class="yanz1"></span>
        <input type="password" id="password" placeholder="密码">
        <span class="yanz2">密码由6-16位的英文字母、数字和特殊字符组成</span>
        <input type="button" value="登 录" id="btn">
      </div>
    </div>
  </div>
  
 <script>


    $(function () {

      $("#btn").click(function () {
        if ($("#username").val() == ""||$("#password").val() == "") {
          return alert("账号密码不能为空")
        } 
        $.ajax({
          type: "get",
          url: "http://jx.xuzhixiang.top/ap/api/login.php",
          data: {
            username: $("#username").val(),
            password: $("#password").val(),
          },
          dataType: "json",
          success: function (response) {
            if (response.code == 1) {
              alert("登录成功")
              localStorage.setItem("userId", response.data.id);
              localStorage.setItem("token", response.data.token);
               window.location.href = '../jdindex.html'
            } else {
              alert("账号或密码错误")
            }
            console.log(response);
          }
        });
      })
    })
    // var pattern = /^.*(?=.{6,16})(?=.*\d)(?=.*[a-z]{1,}).*$/;
    // input[1].onblur = function () {
    //   if (pattern.test(input[1].value)) {
    //     span[1].innerText = "密码OK"
    //     input[1].style.border = "1px  black solid"
    //   } else {
    //     span[1].innerText = "密码由6-16位的英文字母、数字和特殊字符组成（必须包含数字、字母）"
    //     input[1].style.border = "1px  red solid"
    //   }
    // }
  </script> 
</body>

</html>